!function(e,a,t,n){"use strict";var i=i||{};i.funcs={},i.vars={onloaded:!1,$body:e("body"),$window:e(a),$document:e(t),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:e("body").hasClass("rtl")},i.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(a,t){var n=RegExp(i.helper.preg_quote(t+"[\\d+]"),"g");a.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),a.each(function(a){e(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+a+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,a,t){var n;return function(){var i=this,s=arguments,r=function(){n=null,t||e.apply(i,s)},o=t&&!n;clearTimeout(n),n=setTimeout(r,a),o&&e.apply(i,s)}}},e.fn.wpas_clone=function(){for(var a=e.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=a.find("select").add(a.filter("select")),i=0;i<t.length;++i)for(var s=0;s<t[i].options.length;++s)!0===t[i].options[s].selected&&(n[i].options[s].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),a},e.fn.wpas_expand_all=function(){return this.each(function(){e(this).on("click",function(a){a.preventDefault(),e(".wpas-wrapper").toggleClass("wpas-show-all"),e(".wpas-section").wpas_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.wpas_nav_options=function(){return this.each(function(){var t,n=e(this),i=e(a),s=e("#wpwrap"),r=n.find("a");i.on("hashchange wpas.hashchange",function(){var n,i=a.location.hash.replace("#tab=","")||r.first().attr("href").replace("#tab=",""),o=e('[data-tab-id="'+i+'"]');if(o.length){o.closest(".wpas-tab-item").addClass("wpas-tab-expanded").siblings().removeClass("wpas-tab-expanded"),o.next().is("ul")&&(i=(o=o.next().find("li").first().find("a")).data("tab-id")),r.removeClass("wpas-active"),o.addClass("wpas-active"),t&&t.addClass("hidden");var l=e('[data-section-id="'+i+'"]');l.removeClass("hidden"),l.wpas_reload_script(),e(".wpas-section-id").val(l.index()+1),t=l,s.hasClass("wp-responsive-open")&&(e("html, body").animate({scrollTop:l.offset().top-50},200),s.removeClass("wp-responsive-open"))}}).trigger("wpas.hashchange")})},e.fn.wpas_nav_metabox=function(){return this.each(function(){var a,t=e(this),i=t.find("a"),s=t.parent().find(".wpas-section");i.each(function(t){e(this).on("click",function(r){r.preventDefault();var o=e(this);i.removeClass("wpas-active"),o.addClass("wpas-active"),a!==n&&a.addClass("hidden");var l=s.eq(t);l.removeClass("hidden"),l.wpas_reload_script(),a=l})}),i.first().trigger("click")})},e.fn.wpas_page_templates=function(){this.length&&e(t).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var a=e(this).val()||"default";e(".wpas-page-templates").removeClass("wpas-metabox-show").addClass("wpas-metabox-hide"),e(".wpas-page-"+a.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("wpas-metabox-hide").addClass("wpas-metabox-show")})},e.fn.wpas_post_formats=function(){this.length&&e(t).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var a=e(this).val()||"default";a="0"===a?"default":a,e(".wpas-post-formats").removeClass("wpas-metabox-show").addClass("wpas-metabox-hide"),e(".wpas-post-format-"+a).removeClass("wpas-metabox-hide").addClass("wpas-metabox-show")})},e.fn.wpas_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var a=e(this).val(),t=e(".wpas-wrapper"),n=t.find(".wpas-section").find("> .wpas-field:not(.wpas-depend-on)"),i=n.find("> .wpas-title, .wpas-search-tags");a.length>3?(n.addClass("wpas-metabox-hide"),t.addClass("wpas-search-all"),i.each(function(){var t=e(this);if(t.text().match(RegExp(".*?"+a+".*?","i"))){var n=t.closest(".wpas-field");n.removeClass("wpas-metabox-hide"),n.parent().wpas_reload_script()}})):(n.removeClass("wpas-metabox-hide"),t.removeClass("wpas-search-all"))})})},e.fn.wpas_sticky=function(){return this.each(function(){var t=e(this),n=e(a),i=t.find(".wpas-header-inner"),s=parseInt(i.css("padding-left"))+parseInt(i.css("padding-right")),r=0,o=!1,l=function(){var e=Math.max(32,t.offset().top-r),a=n.innerWidth();e<=32&&a>782?(i.css({width:t.outerWidth()-s}),t.css({height:t.outerHeight()}).addClass("wpas-sticky")):(i.removeAttr("style"),t.removeAttr("style").removeClass("wpas-sticky"))},d=function(){o||requestAnimationFrame(function(){l(),o=!1}),o=!0},c=function(){r=n.scrollTop(),d()};n.on("scroll resize",c),c()})},e.fn.wpas_dependency=function(){return this.each(function(){var a=e(this),t=a.children("[data-controller]");if(t.length){var n=e.wpas_deps.createRuleset(),s=e.wpas_deps.createRuleset(),r=[],o=[];t.each(function(){var a=e(this),t=a.data("controller").split("|"),i=a.data("condition").split("|"),l=a.data("value").toString().split("|"),d=!!a.data("depend-global"),c=d?s:n;e.each(t,function(e,t){var n=l[e]||"",s=i[e]||i[0];(c=c.createRule('[data-depend-id="'+t+'"]',s,n)).include(a),d?o.push(t):r.push(t)})}),r.length&&e.wpas_deps.enable(a,n,r),o.length&&e.wpas_deps.enable(i.vars.$body,s,o)}})},e.fn.wpas_field_accordion=function(){return this.each(function(){e(this).find(".wpas-accordion-title").on("click",function(){var a=e(this),t=a.find(".wpas-accordion-icon"),n=a.next();t.hasClass("fa-angle-right")?t.removeClass("fa-angle-right").addClass("fa-angle-down"):t.removeClass("fa-angle-down").addClass("fa-angle-right"),n.data("opened")||(n.wpas_reload_script(),n.data("opened",!0)),n.toggleClass("wpas-accordion-open")})})},e.fn.wpas_field_backup=function(){return this.each(function(){if(n!==a.wp.customize){var t=this,s=e(this),r=(e("body"),s.find(".wpas-import")),o=s.find(".wpas-reset");t.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("wpas_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},o.on("click",function(e){e.preventDefault(),i.vars.is_confirm&&(t.notificationOverlay(),a.wp.ajax.post("wpas-reset",{unique:o.data("unique"),nonce:o.data("nonce")}).done(function(e){a.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("wpas_field_backup_notification")}))}),r.on("click",function(e){e.preventDefault(),i.vars.is_confirm&&(t.notificationOverlay(),a.wp.ajax.post("wpas-import",{unique:r.data("unique"),nonce:r.data("nonce"),data:s.find(".wpas-import-data").val()}).done(function(e){a.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("wpas_field_backup_notification")}))})}})},e.fn.wpas_field_background=function(){return this.each(function(){e(this).find(".wpas--background-image").wpas_reload_script()})},e.fn.wpas_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var a=e(this),t=a.find("textarea"),n=a.find(".CodeMirror"),s=t.data("editor");n.length&&n.remove();var r=setInterval(function(){if(a.is(":visible")){var n=CodeMirror.fromTextArea(t[0],s);if("default"!==s.theme&&-1===i.vars.code_themes.indexOf(s.theme)){var o=e("<link>");e("#wpas-codemirror-css").after(o),o.attr({rel:"stylesheet",id:"wpas-codemirror-"+s.theme+"-css",href:s.cdnURL+"/theme/"+s.theme+".min.css",type:"text/css",media:"all"}),i.vars.code_themes.push(s.theme)}CodeMirror.modeURL=s.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,s.mode),n.on("change",function(e,a){t.val(n.getValue()).trigger("change")}),clearInterval(r)}})}})},e.fn.wpas_field_date=function(){return this.each(function(){var a=e(this),t=a.find("input"),n=a.find(".wpas-date-settings").data("settings");n=e.extend({},n,{showAnim:"",beforeShow:function(a,t){e(t.dpDiv).addClass("wpas-datepicker-wrapper")},onClose:function(a,t){e(t.dpDiv).removeClass("wpas-datepicker-wrapper")}}),2===t.length&&(n=e.extend({},n,{onSelect:function(a){e(this),t.first();var i=t.first().attr("id")===e(this).attr("id")?"minDate":"maxDate",s=e.datepicker.parseDate(n.dateFormat,a);t.not(this).datepicker("option",i,s)}})),t.each(function(){var a=e(this);a.hasClass("hasDatepicker")&&a.removeAttr("id").removeClass("hasDatepicker"),a.datepicker(n)})})},e.fn.wpas_field_datetime=function(){return this.each(function(){var a=e(this),t=a.find("input"),n=a.find(".wpas-datetime-settings").data("settings");n=e.extend({},n,{onReady:function(a,t,n){e(n.calendarContainer).addClass("wpas-flatpickr")}}),2===t.length&&(n=e.extend({},n,{onChange:function(a,n,i){"from"===e(i.element).data("type")?t.last().get(0)._flatpickr.set("minDate",a[0]):t.first().get(0)._flatpickr.set("maxDate",a[0])}})),t.each(function(){e(this).flatpickr(n)})})},e.fn.wpas_field_fieldset=function(){return this.each(function(){e(this).find(".wpas-fieldset-content").wpas_reload_script()})},e.fn.wpas_field_gallery=function(){return this.each(function(){var t,n=e(this),i=n.find(".wpas-edit-gallery"),s=n.find(".wpas-clear-gallery"),r=n.find("ul"),o=n.find("input");n.find("img"),n.on("click",".wpas-button, .wpas-edit-gallery",function(n){var l=e(this),d=o.val(),c=l.hasClass("wpas-edit-gallery")?"edit":"add",p="add"!==c||d.length?"gallery-edit":"gallery";n.preventDefault(),void 0!==a.wp&&a.wp.media&&a.wp.media.gallery&&("gallery"===p?(t=a.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(t=a.wp.media.gallery.edit('[gallery ids="'+d+'"]'),"add"===c&&t.setState("gallery-library")),t.on("update",function(e){r.empty();var a=e.models.map(function(e){var a=e.toJSON(),t=a.sizes&&a.sizes.thumbnail&&a.sizes.thumbnail.url?a.sizes.thumbnail.url:a.url;return r.append('<li><img src="'+t+'"></li>'),a.id});o.val(a.join(",")).trigger("change"),s.removeClass("hidden"),i.removeClass("hidden")}))}),s.on("click",function(e){e.preventDefault(),r.empty(),o.val("").trigger("change"),s.addClass("hidden"),i.addClass("hidden")})})},e.fn.wpas_field_group=function(){return this.each(function(){var a=e(this),t=a.children(".wpas-fieldset"),n=t.length?t:a,s=n.children(".wpas-cloneable-wrapper"),r=n.children(".wpas-cloneable-hidden"),o=n.children(".wpas-cloneable-max"),l=n.children(".wpas-cloneable-min"),d=s.data("title-by"),c=s.data("title-by-prefix"),p=s.data("field-id"),f=Boolean(Number(s.data("title-number"))),h=parseInt(s.data("max")),w=parseInt(s.data("min"));s.hasClass("ui-accordion")&&s.find(".ui-accordion-header-icon").remove();var u=function(a){a.find(".wpas-cloneable-title-number").each(function(a){e(this).html(e(this).closest(".wpas-cloneable-item").index()+1+".")})};s.accordion({header:"> .wpas-cloneable-item > .wpas-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"wpas-cloneable-header-icon fas fa-angle-right",activeHeader:"wpas-cloneable-header-icon fas fa-angle-down"},activate:function(a,t){var n=t.newPanel,i=t.newHeader;if(n.length&&!n.data("opened")){var s=i.find(".wpas-cloneable-value"),r=[];e.each(d,function(e,a){r.push(n.find('[data-depend-id="'+a+'"]'))}),e.each(r,function(a,t){t.on("change keyup wpas.keyup",function(){var a=[];e.each(r,function(e,t){var n=t.val();n&&a.push(n)}),a.length&&s.text(a.join(c))}).trigger("wpas.keyup")}),n.wpas_reload_script(),n.data("opened",!0),n.data("retry",!1)}else n.data("retry")&&(n.wpas_reload_script_retry(),n.data("retry",!1))}}),s.sortable({axis:"y",handle:".wpas-cloneable-title,.wpas-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,a){s.accordion({active:!1}),s.sortable("refreshPositions"),a.item.children(".wpas-cloneable-content").data("retry",!0)},update:function(e,a){i.helper.name_nested_replace(s.children(".wpas-cloneable-item"),p),s.wpas_customizer_refresh(),f&&u(s)}}),n.children(".wpas-cloneable-add").on("click",function(e){e.preventDefault();var a=s.children(".wpas-cloneable-item").length;if(l.hide(),h&&a+1>h){o.show();return}var t=r.wpas_clone(!0);t.removeClass("wpas-cloneable-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(p+"[0]",p+"["+a+"]")}),s.append(t),s.accordion("refresh"),s.accordion({active:a}),s.wpas_customizer_refresh(),s.wpas_customizer_listen({closest:!0}),f&&u(s)});var v=function(a){a.preventDefault();var t=s.children(".wpas-cloneable-item").length;if(l.hide(),h&&t+1>h){o.show();return}var n=e(this).parent().parent(),r=n.children(".wpas-cloneable-helper").wpas_clone(!0),d=n.children(".wpas-cloneable-title").wpas_clone(),c=n.children(".wpas-cloneable-content").wpas_clone(),w=e('<div class="wpas-cloneable-item" />');w.append(r),w.append(d),w.append(c),s.children().eq(n.index()).after(w),i.helper.name_nested_replace(s.children(".wpas-cloneable-item"),p),s.accordion("refresh"),s.wpas_customizer_refresh(),s.wpas_customizer_listen({closest:!0}),f&&u(s)};s.children(".wpas-cloneable-item").children(".wpas-cloneable-helper").on("click",".wpas-cloneable-clone",v),n.children(".wpas-cloneable-hidden").children(".wpas-cloneable-helper").on("click",".wpas-cloneable-clone",v);var g=function(a){a.preventDefault();var t=s.children(".wpas-cloneable-item").length;if(o.hide(),l.hide(),w&&t-1<w){l.show();return}e(this).closest(".wpas-cloneable-item").remove(),i.helper.name_nested_replace(s.children(".wpas-cloneable-item"),p),s.wpas_customizer_refresh(),f&&u(s)};s.children(".wpas-cloneable-item").children(".wpas-cloneable-helper").on("click",".wpas-cloneable-remove",g),n.children(".wpas-cloneable-hidden").children(".wpas-cloneable-helper").on("click",".wpas-cloneable-remove",g)})},e.fn.wpas_field_icon=function(){return this.each(function(){var t=e(this);t.on("click",".wpas-icon-add",function(n){n.preventDefault();var s=e(this),r=e("#wpas-modal-icon");r.removeClass("hidden"),i.vars.$icon_target=t,i.vars.icon_modal_loaded||(r.find(".wpas-modal-loading").show(),a.wp.ajax.post("wpas-get-icons",{nonce:s.data("nonce")}).done(function(a){r.find(".wpas-modal-loading").hide(),i.vars.icon_modal_loaded=!0;var t=r.find(".wpas-modal-load").html(a.content);t.on("click","i",function(a){a.preventDefault();var t=e(this).attr("title");i.vars.$icon_target.find(".wpas-icon-preview i").removeAttr("class").addClass(t),i.vars.$icon_target.find(".wpas-icon-preview").removeClass("hidden"),i.vars.$icon_target.find(".wpas-icon-remove").removeClass("hidden"),i.vars.$icon_target.find("input").val(t).trigger("change"),r.addClass("hidden")}),r.on("change keyup",".wpas-icon-search",function(){var a=e(this).val();t.find("i").each(function(){var t=e(this);0>t.attr("title").search(RegExp(a,"i"))?t.hide():t.show()})}),r.on("click",".wpas-modal-close, .wpas-modal-overlay",function(){r.addClass("hidden")})}).fail(function(e){r.find(".wpas-modal-loading").hide(),r.find(".wpas-modal-load").html(e.error),r.on("click",function(){r.addClass("hidden")})}))}),t.on("click",".wpas-icon-remove",function(a){a.preventDefault(),t.find(".wpas-icon-preview").addClass("hidden"),t.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.wpas_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var a=e(this),t=a.find(".wpas--map-osm"),n=a.find(".wpas--map-search input"),i=a.find(".wpas--latitude"),s=a.find(".wpas--longitude"),r=a.find(".wpas--zoom"),o=t.data("map"),l=L.map(t.get(0),o);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(l);var d=L.marker(o.center,{draggable:!0}).addTo(l),c=function(e){i.val(e.lat),s.val(e.lng),r.val(l.getZoom())};l.on("click",function(e){d.setLatLng(e.latlng),c(e.latlng)}),l.on("zoom",function(){c(d.getLatLng())}),d.on("drag",function(){c(d.getLatLng())}),n.length||(n=e('[data-depend-id="'+a.find(".wpas--address-field").data("address-field")+'"]'));var p={};n.autocomplete({source:function(a,t){var n=a.term;if(n in p){t(p[n]);return}e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:n},function(e){var a;a=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],p[n]=a,t(a)})},select:function(e,a){if("no-data"===a.item.value)return!1;var t=L.latLng(a.item.lat,a.item.lon);l.panTo(t),d.setLatLng(t),c(t)},create:function(a,t){e(this).autocomplete("widget").addClass("wpas-map-ui-autocomplate")}});var f=function(){var e=L.latLng(i.val(),s.val());l.panTo(e),d.setLatLng(e)};i.on("change",f),s.on("change",f)}})},e.fn.wpas_field_link=function(){return this.each(function(){var t=e(this),n=t.find(".wpas--link"),s=t.find(".wpas--add"),r=t.find(".wpas--edit"),o=t.find(".wpas--remove"),l=t.find(".wpas--result"),d=i.helper.uid("wpas-wplink-textarea-");s.on("click",function(e){e.preventDefault(),a.wpLink.open(d)}),r.on("click",function(a){a.preventDefault(),s.trigger("click"),e("#wp-link-url").val(t.find(".wpas--url").val()),e("#wp-link-text").val(t.find(".wpas--text").val()),e("#wp-link-target").prop("checked","_blank"===t.find(".wpas--target").val())}),o.on("click",function(e){e.preventDefault(),t.find(".wpas--url").val("").trigger("change"),t.find(".wpas--text").val(""),t.find(".wpas--target").val(""),s.removeClass("hidden"),r.addClass("hidden"),o.addClass("hidden"),l.parent().addClass("hidden")}),n.attr("id",d).on("change",function(){var n=a.wpLink.getAttrs(),i=n.href,d=e("#wp-link-text").val(),c=n.target?n.target:"";t.find(".wpas--url").val(i).trigger("change"),t.find(".wpas--text").val(d),t.find(".wpas--target").val(c),l.html('{url:"'+i+'", text:"'+d+'", target:"'+c+'"}'),s.addClass("hidden"),r.removeClass("hidden"),o.removeClass("hidden"),l.parent().removeClass("hidden")})})},e.fn.wpas_field_media=function(){return this.each(function(){var t,n=e(this),i=n.find(".wpas--button"),s=n.find(".wpas--remove"),r=i.data("library")&&i.data("library").split(",")||"",o=!!n.hasClass("wpas-assign-field-background")&&n.closest(".wpas-field-background").find(".wpas--auto-attributes");i.on("click",function(e){if(e.preventDefault(),void 0!==a.wp&&a.wp.media&&a.wp.media.gallery){if(t){t.open();return}(t=a.wp.media({library:{type:r}})).on("select",function(){var e,a=t.state().get("selection").first().attributes,l=i.data("preview-size")||"thumbnail";(!r.length||-1!==r.indexOf(a.subtype)||-1!==r.indexOf(a.type))&&(n.find(".wpas--id").val(a.id),n.find(".wpas--width").val(a.width),n.find(".wpas--height").val(a.height),n.find(".wpas--alt").val(a.alt),n.find(".wpas--title").val(a.title),n.find(".wpas--description").val(a.description),e=void 0!==a.sizes&&void 0!==a.sizes.thumbnail&&"thumbnail"===l?a.sizes.thumbnail.url:void 0!==a.sizes&&void 0!==a.sizes.full?a.sizes.full.url:"image"===a.type?a.url:a.icon,o&&o.removeClass("wpas--attributes-hidden"),s.removeClass("hidden"),n.find(".wpas--preview").removeClass("hidden"),n.find(".wpas--src").attr("src",e),n.find(".wpas--thumbnail").val(e),n.find(".wpas--url").val(a.url).trigger("change"))}),t.open()}}),s.on("click",function(e){e.preventDefault(),o&&o.addClass("wpas--attributes-hidden"),s.addClass("hidden"),n.find("input").val(""),n.find(".wpas--preview").addClass("hidden"),n.find(".wpas--url").trigger("change")})})},e.fn.wpas_field_repeater=function(){return this.each(function(){var a=e(this),t=a.children(".wpas-fieldset"),n=t.length?t:a,s=n.children(".wpas-repeater-wrapper"),r=n.children(".wpas-repeater-hidden"),o=n.children(".wpas-repeater-max"),l=n.children(".wpas-repeater-min"),d=s.data("field-id"),c=parseInt(s.data("max")),p=parseInt(s.data("min"));s.children(".wpas-repeater-item").children(".wpas-repeater-content").wpas_reload_script(),s.sortable({axis:"y",handle:".wpas-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,a){i.helper.name_nested_replace(s.children(".wpas-repeater-item"),d),s.wpas_customizer_refresh(),a.item.wpas_reload_script_retry()}}),n.children(".wpas-repeater-add").on("click",function(e){e.preventDefault();var a=s.children(".wpas-repeater-item").length;if(l.hide(),c&&a+1>c){o.show();return}var t=r.wpas_clone(!0);t.removeClass("wpas-repeater-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(d+"[0]",d+"["+a+"]")}),s.append(t),t.children(".wpas-repeater-content").wpas_reload_script(),s.wpas_customizer_refresh(),s.wpas_customizer_listen({closest:!0})});var f=function(a){a.preventDefault();var t=s.children(".wpas-repeater-item").length;if(l.hide(),c&&t+1>c){o.show();return}var n=e(this).parent().parent().parent(),r=n.children(".wpas-repeater-content").wpas_clone(),p=n.children(".wpas-repeater-helper").wpas_clone(!0),f=e('<div class="wpas-repeater-item" />');f.append(r),f.append(p),s.children().eq(n.index()).after(f),f.children(".wpas-repeater-content").wpas_reload_script(),i.helper.name_nested_replace(s.children(".wpas-repeater-item"),d),s.wpas_customizer_refresh(),s.wpas_customizer_listen({closest:!0})};s.children(".wpas-repeater-item").children(".wpas-repeater-helper").on("click",".wpas-repeater-clone",f),n.children(".wpas-repeater-hidden").children(".wpas-repeater-helper").on("click",".wpas-repeater-clone",f);var h=function(a){a.preventDefault();var t=s.children(".wpas-repeater-item").length;if(o.hide(),l.hide(),p&&t-1<p){l.show();return}e(this).closest(".wpas-repeater-item").remove(),i.helper.name_nested_replace(s.children(".wpas-repeater-item"),d),s.wpas_customizer_refresh()};s.children(".wpas-repeater-item").children(".wpas-repeater-helper").on("click",".wpas-repeater-remove",h),n.children(".wpas-repeater-hidden").children(".wpas-repeater-helper").on("click",".wpas-repeater-remove",h)})},e.fn.wpas_field_slider=function(){return this.each(function(){var a=e(this),t=a.find("input"),n=a.find(".wpas-slider-ui"),i=t.data(),s=t.val()||0;n.hasClass("ui-slider")&&n.empty(),n.slider({range:"min",value:s,min:i.min||0,max:i.max||100,step:i.step||1,slide:function(e,a){t.val(a.value).trigger("change")}}),t.on("keyup",function(){n.slider("value",t.val())})})},e.fn.wpas_field_sortable=function(){return this.each(function(){var a=e(this).find(".wpas-sortable");a.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){a.wpas_customizer_refresh()}}),a.find(".wpas-sortable-content").wpas_reload_script()})},e.fn.wpas_field_sorter=function(){return this.each(function(){var a=e(this),t=a.find(".wpas-enabled"),n=a.find(".wpas-disabled"),i=!!n.length&&n;t.sortable({connectWith:i,placeholder:"ui-sortable-placeholder",update:function(e,t){var n=t.item.find("input");t.item.parent().hasClass("wpas-enabled")?n.attr("name",n.attr("name").replace("disabled","enabled")):n.attr("name",n.attr("name").replace("enabled","disabled")),a.wpas_customizer_refresh()}}),i&&i.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(e,t){a.wpas_customizer_refresh()}})})},e.fn.wpas_field_spinner=function(){return this.each(function(){var a=e(this),t=a.find("input"),n=a.find(".ui-button"),i=t.data();n.length&&n.remove(),t.spinner({min:i.min||0,max:i.max||100,step:i.step||1,create:function(e,a){i.unit&&t.after('<span class="ui-button wpas--unit">'+i.unit+"</span>")},spin:function(e,a){t.val(a.value).trigger("change")}})})},e.fn.wpas_field_switcher=function(){return this.each(function(){var a=e(this).find(".wpas--switcher");a.on("click",function(){var e=0,t=a.find("input");a.hasClass("wpas--active")?a.removeClass("wpas--active"):(e=1,a.addClass("wpas--active")),t.val(e).trigger("change")})})},e.fn.wpas_field_switcher_box=function(){return this.each(function(){var a=e(this).find(".wpas--switcher");a.on("click",function(){var e=0,t=a.find("input");a.hasClass("wpas--active")?a.removeClass("wpas--active"):(e=1,a.addClass("wpas--active")),t.val(e).trigger("change")})})},e.fn.wpas_field_tabbed=function(){return this.each(function(){var a=e(this),t=a.find(".wpas-tabbed-nav a"),n=a.find(".wpas-tabbed-content");n.eq(0).wpas_reload_script(),t.on("click",function(a){a.preventDefault();var t=e(this),i=t.index(),s=n.eq(i);t.addClass("wpas-tabbed-active").siblings().removeClass("wpas-tabbed-active"),s.wpas_reload_script(),s.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.wpas_field_typography=function(){return this.each(function(){var a=this,t=e(this),n=[],s=wpas_typography_json.webfonts,r=wpas_typography_json.googlestyles,o=wpas_typography_json.defaultstyles;a.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},a.sanitize_style=function(e){return r[e]?r[e]:e},a.load_google_font=function(e,a,t){e&&"object"==typeof WebFont&&(a=a?a.replace("normal",""):"",t=t?t.replace("normal",""):"",(a||t)&&(e=e+":"+a+t),-1===n.indexOf(e)&&WebFont.load({google:{families:[e]}}),n.push(e))},a.append_select_options=function(t,n,i,s,r){t.find("option").not(":first").remove();var o="";e.each(n,function(e,t){var n,l=t;n=r?i&&-1!==i.indexOf(t)?" selected":"":i&&i===t?" selected":"","subset"===s?l=a.sanitize_subset(t):"style"===s&&(l=a.sanitize_style(t)),o+='<option value="'+t+'"'+n+">"+l+"</option>"}),t.append(o).trigger("wpas.change").trigger("chosen:updated")},a.init=function(){var n=[],r=t.find(".wpas--typography"),l=t.find(".wpas--type"),d=t.find(".wpas--block-font-style"),c=r.data("unit"),p=r.data("line-height-unit"),f=r.data("exclude")?r.data("exclude").split(","):[];t.find(".wpas--chosen").length&&t.find("select").each(function(){var a=e(this),t=a.parent().find(".chosen-container");t.length&&t.remove(),a.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var h=t.find(".wpas--font-family"),w=h.val();h.find("option").not(":first-child").remove();var u="";e.each(s,function(a,t){(!f||-1===f.indexOf(a))&&(u+='<optgroup label="'+t.label+'">',e.each(t.fonts,function(e,t){var n=(t="object"==typeof t?e:t)===w?" selected":"";u+='<option value="'+t+'" data-type="'+a+'"'+n+">"+t+"</option>"}),u+="</optgroup>")}),h.append(u).trigger("chosen:updated");var v=t.find(".wpas--block-font-style");if(v.length){var g=t.find(".wpas--font-style-select"),m=g.val()?g.val().replace(/normal/g,""):"";g.on("change wpas.change",function(e){var a=g.val();!a&&n&&-1===n.indexOf("normal")&&(a=n[0]);var i=a&&"italic"!==a&&"normal"===a?"normal":"",s=a&&"italic"!==a&&"normal"!==a?a.replace("italic",""):i,r=a&&"italic"===a.substr(-6)?"italic":"";t.find(".wpas--font-weight").val(s),t.find(".wpas--font-style").val(r)});var b=t.find(".wpas--block-extra-styles");if(b.length)var y=t.find(".wpas--extra-styles"),k=y.val()}var C=t.find(".wpas--block-subset");if(C.length)var x=t.find(".wpas--subset"),$=x.val(),_=x.data("multiple")||!1;var z=t.find(".wpas--block-backup-font-family");h.on("change wpas.change",function(e){C.length&&C.addClass("hidden"),b.length&&b.addClass("hidden"),z.length&&z.addClass("hidden");var t=h.find(":selected"),i=t.val(),r=t.data("type");if(r&&i){if(("google"===r||"custom"===r)&&z.length&&z.removeClass("hidden"),v.length){var c=o;"google"===r&&s[r].fonts[i][0]?c=s[r].fonts[i][0]:"custom"===r&&s[r].fonts[i]&&(c=s[r].fonts[i]),n=c;var p=-1!==c.indexOf("normal")?"normal":c[0],f=m&&-1!==c.indexOf(m)?m:p;a.append_select_options(g,c,f,"style"),m=!1,v.removeClass("hidden"),"google"===r&&b.length&&c.length>1&&(a.append_select_options(y,c,k,"style",!0),k=!1,b.removeClass("hidden"))}if("google"===r&&C.length&&s[r].fonts[i][1]){var w=s[r].fonts[i][1],u=w.length<2&&"latin"!==w[0]?w[0]:"",D=$&&-1!==w.indexOf($)?$:u;D=_&&$?$:D,a.append_select_options(x,w,D,"subset",_),$=!1,C.removeClass("hidden")}}else d.find(":input").val(""),C.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),v.length&&(g.find("option").not(":first-child").remove(),g.trigger("chosen:updated"));l.val(r)}).trigger("wpas.change");var D=t.find(".wpas--block-preview");if(D.length){var O=t.find(".wpas--preview");t.on("change",i.helper.debounce(function(e){D.removeClass("hidden");var n=h.val(),i=t.find(".wpas--font-weight").val(),s=t.find(".wpas--font-style").val(),r=t.find(".wpas--font-size").val(),o=t.find(".wpas--font-variant").val(),l=t.find(".wpas--line-height").val(),d=t.find(".wpas--text-align").val(),f=t.find(".wpas--text-transform").val(),w=t.find(".wpas--text-decoration").val(),u=t.find(".wpas--color").val(),v=t.find(".wpas--word-spacing").val(),g=t.find(".wpas--letter-spacing").val(),m=t.find(".wpas--custom-style").val();"google"===t.find(".wpas--type").val()&&a.load_google_font(n,i,s);var b={};n&&(b.fontFamily=n),i&&(b.fontWeight=i),s&&(b.fontStyle=s),o&&(b.fontVariant=o),r&&(b.fontSize=r+c),l&&(b.lineHeight=l+p),g&&(b.letterSpacing=g+c),v&&(b.wordSpacing=v+c),d&&(b.textAlign=d),f&&(b.textTransform=f),w&&(b.textDecoration=w),u&&(b.color=u),O.removeAttr("style"),m&&O.attr("style",m),O.css(b)},100)),D.on("click",function(){O.toggleClass("wpas--black-background");var e=D.find(".wpas--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),D.hasClass("hidden")||t.trigger("change")}},a.init()})},e.fn.wpas_field_upload=function(){return this.each(function(){var t,n=e(this),i=n.find("input"),s=n.find(".wpas--button"),r=n.find(".wpas--remove"),o=n.find(".wpas--preview"),l=n.find(".wpas--src"),d=s.data("library")&&s.data("library").split(",")||"";s.on("click",function(e){if(e.preventDefault(),void 0!==a.wp&&a.wp.media&&a.wp.media.gallery){if(t){t.open();return}(t=a.wp.media({library:{type:d}})).on("select",function(){var e=t.state().get("selection").first().attributes;(!d.length||-1!==d.indexOf(e.subtype)||-1!==d.indexOf(e.type))&&i.val(e.url).trigger("change")}),t.open()}}),r.on("click",function(e){e.preventDefault(),i.val("").trigger("change")}),i.on("change",function(a){var t=i.val();t?r.removeClass("hidden"):r.addClass("hidden"),o.length&&(-1!==e.inArray(t.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(o.removeClass("hidden"),l.attr("src",t)):o.addClass("hidden"))})})},e.fn.wpas_field_wp_editor=function(){return this.each(function(){if(void 0!==a.wp.editor&&void 0!==a.tinyMCEPreInit&&void 0!==a.tinyMCEPreInit.mceInit.wpas_wp_editor){var t=e(this),n=t.find(".wpas-wp-editor"),s=t.find("textarea");(t.find(".wp-editor-wrap").length||t.find(".mce-container").length)&&(n.empty(),n.append(s),s.css("display",""));var r=i.helper.uid("wpas-editor-");s.attr("id",r);var o={tinymce:a.tinyMCEPreInit.mceInit.wpas_wp_editor,quicktags:a.tinyMCEPreInit.qtInit.wpas_wp_editor},l=n.data("editor-settings"),d=wp.oldEditor?wp.oldEditor:wp.editor;d&&d.hasOwnProperty("autop")&&(wp.editor.autop=d.autop,wp.editor.removep=d.removep,wp.editor.initialize=d.initialize);var c=function(e){e.on("change keyup",function(){var a=l.wpautop?e.getContent():wp.editor.removep(e.getContent());s.val(a).trigger("change")})};o.tinymce=e.extend({},o.tinymce,{selector:"#"+r,setup:c}),!1===l.tinymce&&(o.tinymce=!1,n.addClass("wpas-no-tinymce")),!1===l.quicktags&&(o.quicktags=!1,n.addClass("wpas-no-quicktags"));var p=setInterval(function(){t.is(":visible")&&(a.wp.editor.initialize(r,o),clearInterval(p))});if(l.media_buttons&&a.wpas_media_buttons){var f=n.find(".wp-media-buttons");if(f.length)f.find(".wpas-shortcode-button").data("editor-id",r);else{var h=e(a.wpas_media_buttons);h.find(".wpas-shortcode-button").data("editor-id",r),n.prepend(h)}}}})},e.fn.wpas_confirm=function(){return this.each(function(){e(this).on("click",function(t){var n=e(this).data("confirm")||a.wpas_vars.i18n.confirm;if(!confirm(n))return t.preventDefault(),!1;i.vars.is_confirm=!0,i.vars.form_modified=!1})})},e.fn.serializeObject=function(){var a={};return e.each(this.serializeArray(),function(t,i){var s=i.name,r=i.value;a[s]=n===a[s]?r:e.isArray(a[s])?a[s].concat(r):[a[s],r]}),a},e.fn.wpas_save=function(){return this.each(function(){var t,n=e(this),s=e(".wpas-save"),r=e(".wpas-options"),o=!1;n.on("click",function(l){if(!o){var d=n.data("save"),c=n.val();s.attr("value",d),n.hasClass("wpas-save-ajax")?(l.preventDefault(),r.addClass("wpas-saving"),s.prop("disabled",!0),a.wp.ajax.post("wpas_"+r.data("unique")+"_ajax_save",{data:e("#wpas-form").serializeJSONWPAS()}).done(function(a){if(e(".wpas-error").remove(),Object.keys(a.errors).length){var n='<i class="wpas-label-error wpas-error">!</i>';e.each(a.errors,function(a,t){var i=e('[data-depend-id="'+a+'"]'),s=e('a[href="#tab='+i.closest(".wpas-section").data("section-id")+'"]'),r=s.closest(".wpas-tab-item");i.closest(".wpas-fieldset").append('<p class="wpas-error wpas-error-text">'+t+"</p>"),s.find(".wpas-error").length||s.append(n),r.find(".wpas-arrow .wpas-error").length||r.find(".wpas-arrow").append(n)})}r.removeClass("wpas-saving"),s.prop("disabled",!1).attr("value",c),o=!1,i.vars.form_modified=!1,i.vars.$form_warning.hide(),clearTimeout(t);var l=e(".wpas-form-success");l.empty().append(a.notice).fadeIn("fast",function(){t=setTimeout(function(){l.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):i.vars.form_modified=!1}o=!0})})},e.fn.wpas_options=function(){return this.each(function(){var s=e(this),r=s.find(".wpas-content"),o=s.find(".wpas-form-success"),l=s.find(".wpas-form-warning"),d=s.find(".wpas-header .wpas-save");i.vars.$form_warning=l,l.length&&(a.onbeforeunload=function(){return!!i.vars.form_modified||n},r.on("change keypress",":input",function(){i.vars.form_modified||(o.hide(),l.fadeIn("fast"),i.vars.form_modified=!0)})),o.hasClass("wpas-form-show")&&setTimeout(function(){o.fadeOut("fast")},1e3),e(t).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return d.trigger("click"),e.preventDefault(),!1})})},e.fn.wpas_taxonomy=function(){return this.each(function(){var a=e(this),t=a.parents("form");if("addtag"===t.attr("id")){var n=t.find("#submit"),i=a.children(".wpas-field").wpas_clone();n.on("click",function(){t.find(".form-required").hasClass("form-invalid")||(a.data("inited",!1),a.empty(),a.html(i),i=i.wpas_clone(),a.wpas_reload_script())})}})},e.fn.wpas_shortcode=function(){var s=this;return s.shortcode_parse=function(a,t){var n="";return e.each(a,function(a,i){n+="["+(t=t||a),e.each(i,function(e,a){"content"===e?(n+="]",n+=a,n+="[/"+t):n+=s.shortcode_tags(e,a)}),n+="]"}),n},s.shortcode_tags=function(a,t){var n="";return""!==t&&("object"!=typeof t||e.isArray(t)?n+=" "+a+'="'+t.toString()+'"':e.each(t,function(e,a){"background-image"===e&&(a=a.url?a.url:""),""!==a&&(n+=" "+e+'="'+a.toString()+'"')})),n},s.insertAtChars=function(e,a){var t=void 0!==e[0].name?e[0]:e;return t.value.length&&void 0!==t.selectionStart?(t.focus(),t.value.substring(0,t.selectionStart)+a+t.value.substring(t.selectionEnd,t.value.length)):(t.focus(),a)},s.send_to_editor=function(a,t){var n;if("undefined"!=typeof tinymce&&(n=tinymce.get(t)),n&&!n.isHidden())n.execCommand("mceInsertContent",!1,a);else{var i=e("#"+t);i.val(s.insertAtChars(i,a)).trigger("change")}},this.each(function(){var r,o,l,d,c,p,f,h,w,u=e(this),v=u.find(".wpas-modal-load"),g=(u.find(".wpas-modal-content"),u.find(".wpas-modal-insert")),m=u.find(".wpas-modal-loading"),b=u.find("select"),y=u.data("modal-id"),k=u.data("nonce");e(t).on("click",'.wpas-shortcode-button[data-modal-id="'+y+'"]',function(a){a.preventDefault(),r=(w=e(this)).data("editor-id")||!1,o=w.data("target-id")||!1,l=w.data("gutenberg-id")||!1,u.removeClass("hidden"),u.hasClass("wpas-shortcode-single")&&c===n&&b.trigger("change")}),b.on("change",function(){var t=e(this),n=t.find(":selected");d=t.val(),c=n.data("shortcode"),p=n.data("view")||"normal",f=n.data("group")||c,v.empty(),d?(m.show(),a.wp.ajax.post("wpas-get-shortcode-"+y,{shortcode_key:d,nonce:k}).done(function(a){m.hide();var t=e(a.content).appendTo(v);g.parent().removeClass("hidden"),h=t.find(".wpas--repeat-shortcode").wpas_clone(),t.wpas_reload_script(),t.find(".wpas-fields").wpas_reload_script()})):g.parent().addClass("hidden")}),g.on("click",function(t){if(t.preventDefault(),!(g.prop("disabled")||g.attr("disabled"))){var n="",i=u.find(".wpas-field:not(.wpas-depend-on)").find(":input:not(.ignore)").serializeObjectWPAS();switch(p){case"contents":var d=c?i[c]:i;e.each(d,function(e,a){var t=c||e;n+="["+t+"]"+a+"[/"+t+"]"});break;case"group":n+="["+c,e.each(i[c],function(e,a){n+=s.shortcode_tags(e,a)}),n+="]",n+=s.shortcode_parse(i[f],f),n+="[/"+c+"]";break;case"repeater":n+=s.shortcode_parse(i[f],f);break;default:n+=s.shortcode_parse(i)}if(n=""===n?"["+c+"]":n,l){var h=a.wpas_gutenberg_props.attributes.hasOwnProperty("shortcode")?a.wpas_gutenberg_props.attributes.shortcode:"";a.wpas_gutenberg_props.setAttributes({shortcode:h+n})}else if(r)s.send_to_editor(n,r);else{var v=o?e(o):w.parent().find("textarea");v.val(s.insertAtChars(v,n)).trigger("change")}u.addClass("hidden")}}),u.on("click",".wpas--repeat-button",function(e){e.preventDefault();var a=u.find(".wpas--repeatable"),t=h.wpas_clone(),n=t.find(".wpas-repeat-remove");t.appendTo(a),t.find(".wpas-fields").wpas_reload_script(),i.helper.name_nested_replace(u.find(".wpas--repeat-shortcode"),f),n.on("click",function(){t.remove(),i.helper.name_nested_replace(u.find(".wpas--repeat-shortcode"),f)})}),u.on("click",".wpas-modal-close, .wpas-modal-overlay",function(){u.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var a=6-e.length-1;a>=0;a--)e="0"+e;return"#"+e}),i.funcs.parse_color=function(e){var a=e.replace(/\s+/g,""),t=-1!==a.indexOf("rgba")?parseFloat(100*a.replace(/^.*,(.+)\)/,"$1")):100;return{value:a,transparent:t,rgba:t<100}},e.fn.wpas_color=function(){return this.each(function(){var t,n=e(this),s=i.funcs.parse_color(n.val()),r=!a.wpas_vars.color_palette.length||a.wpas_vars.color_palette;n.hasClass("wp-color-picker")&&n.closest(".wp-picker-container").after(n).remove(),n.wpColorPicker({palettes:r,change:function(e,a){var i=a.color.toString();t.removeClass("wpas--transparent-active"),t.find(".wpas--transparent-offset").css("background-color",i),n.val(i).trigger("change")},create:function(){t=n.closest(".wp-picker-container");var a=n.data("a8cIris"),r=e('<div class="wpas--transparent-wrap"><div class="wpas--transparent-slider"></div><div class="wpas--transparent-offset"></div><div class="wpas--transparent-text"></div><div class="wpas--transparent-button">transparent <i class="fas fa-toggle-off"></i></div></div>').appendTo(t.find(".wp-picker-holder")),o=r.find(".wpas--transparent-slider"),l=r.find(".wpas--transparent-text"),d=r.find(".wpas--transparent-offset"),c=r.find(".wpas--transparent-button");"transparent"===n.val()&&t.addClass("wpas--transparent-active"),c.on("click",function(){"transparent"!==n.val()?(n.val("transparent").trigger("change").removeClass("iris-error"),t.addClass("wpas--transparent-active")):(n.val(a._color.toString()).trigger("change"),t.removeClass("wpas--transparent-active"))}),o.slider({value:s.transparent,step:1,min:0,max:100,slide:function(e,t){var i=parseFloat(t.value/100);a._color._alpha=i,n.wpColorPicker("color",a._color.toString()),l.text(1===i||0===i?"":i)},create:function(){var e=parseFloat(s.transparent/100);l.text(e<1?e:""),d.css("background-color",s.value),t.on("click",".wp-picker-clear",function(){a._color._alpha=1,l.text(""),o.slider("option","value",100),t.removeClass("wpas--transparent-active"),n.trigger("change")}),t.on("click",".wp-picker-default",function(){var e=i.funcs.parse_color(n.data("default-color")),s=parseFloat(e.transparent/100);a._color._alpha=s,l.text(s<1?s:""),o.slider("option","value",e.transparent),"transparent"===e.value&&(n.removeClass("iris-error"),t.addClass("wpas--transparent-active"))})}})}})})},e.fn.wpas_chosen=function(){return this.each(function(){var t=e(this),i=t.parent().find(".chosen-container"),s=t.hasClass("wpas-chosen-sortable")||!1,r=t.hasClass("wpas-chosen-ajax")||!1,o=t.attr("multiple")||!1,l=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:o?"100%":"auto",no_results_text:a.wpas_vars.i18n.no_results_text},t.data("chosen-settings"));if(i.length&&i.remove(),r){var d=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:a.wpas_vars.i18n.typing_text,searching_text:a.wpas_vars.i18n.searching_text,no_results_text:a.wpas_vars.i18n.no_results_text},t.data("chosen-settings"));t.WPASAjaxChosen(d)}else t.chosen(l);if(o){var c=t.parent().find(".wpas-hide-select"),p=c.val()||[];t.on("change",function(e,t){t&&t.selected?c.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&c.find('option[value="'+t.deselected+'"]').remove(),n!==a.wp.customize&&0===c.children().length&&c.data("customize-setting-link")&&a.wp.customize.control(c.data("customize-setting-link")).setting.set(""),c.trigger("change")}),t.WPASChosenOrder(p,!0)}if(s){var f=t.parent().find(".chosen-container").find(".chosen-choices");f.bind("mousedown",function(a){e(a.target).is("span")&&a.stopPropagation()}),f.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,a){a.placeholder.width(a.item.innerWidth()),a.placeholder.height(a.item.innerHeight())},update:function(a,n){var i="",s=t.data("chosen"),r=t.parent().find(".wpas-hide-select");f.find(".search-choice-close").each(function(){var a=e(this).data("option-array-index");e.each(s.results_data,function(e,t){t.array_index===a&&(i+='<option value="'+t.value+'" selected>'+t.value+"</option>")})}),r.children().remove(),r.append(i),r.trigger("change")}})}})},e.fn.wpas_checkbox=function(){return this.each(function(){var a=e(this),t=a.find(".wpas--input"),n=a.find(".wpas--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},e.fn.wpas_checkbox_all=function(){return this.each(function(){var a=e(this);a.on("click",function(){var t=a.closest(".wpas-field-checkbox").find(":input"),n=!1;t.each(function(){e(this).prop("checked")||(n=!0)}),n?(t.prop("checked","checked"),t.attr("checked","checked")):(t.prop("checked",""),t.removeAttr("checked")),t.first().trigger("change")})})},e.fn.wpas_siblings=function(){return this.each(function(){var a=e(this),t=a.find(".wpas--sibling"),n=a.data("multiple")||!1;t.on("click",function(){var t=e(this);n?t.hasClass("wpas--active")?(t.removeClass("wpas--active"),t.find("input").prop("checked",!1).trigger("change")):(t.addClass("wpas--active"),t.find("input").prop("checked",!0).trigger("change")):(a.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("wpas--active").siblings().removeClass("wpas--active"))})})},e.fn.wpas_help=function(){return this.each(function(){var a,t,s=e(this);s.on({mouseenter:function(){a=e('<div class="wpas-tooltip"></div>').html(s.find(".wpas-help-text").html()).appendTo("body"),t=i.vars.is_rtl?s.offset().left+24:s.offset().left-a.outerWidth(),a.css({top:s.offset().top-(a.outerHeight()/2-14),left:t})},mouseleave:function(){a!==n&&a.remove()}})})},e.fn.wpas_customizer_refresh=function(){return this.each(function(){var i=e(this),s=i.closest(".wpas-customize-complex");if(s.length){var r=s.data("unique-id");if(r===n)return;var o=s.find(":input"),l=s.data("option-id"),d=o.serializeObjectWPAS(),c=!e.isEmptyObject(d)&&d[r]&&d[r][l]?d[r][l]:"",p=a.wp.customize.control(r+"["+l+"]");p.setting._value=null,p.setting.set(c)}else i.find(":input").first().trigger("change");e(t).trigger("wpas-customizer-refresh",i)})},e.fn.wpas_customizer_listen=function(t){var i=e.extend({closest:!1},t);return this.each(function(){if(n!==a.wp.customize){var t=i.closest?e(this).closest(".wpas-customize-complex"):e(this),s=t.find(":input"),r=t.data("unique-id"),o=t.data("option-id");r!==n&&s.on("change keyup wpas.change",function(){var n=t.find(":input").serializeObjectWPAS(),i=!e.isEmptyObject(n)&&n[r]&&n[r][o]?n[r][o]:"";a.wp.customize.control(r+"["+o+"]").setting.set(i)})}})},e(t).on("expanded",".control-section",function(){var a=e(this);if(a.hasClass("open")&&!a.data("inited")){var t=a.find(".wpas-customize-field"),n=a.find(".wpas-customize-complex");t.length&&(a.wpas_dependency(),t.wpas_reload_script({dependency:!1}),n.wpas_customizer_listen()),a.data("inited",!0)}}),i.vars.$window.on("resize wpas.resize",i.helper.debounce(function(t){(navigator.userAgent.indexOf("AppleWebKit/")>-1?i.vars.$window.width():a.innerWidth)<=782&&!i.vars.onloaded&&(e(".wpas-section").wpas_reload_script(),i.vars.onloaded=!0)},200)).trigger("wpas.resize"),e.fn.wpas_widgets=function(){return this.each(function(){e(t).on("widget-added widget-updated",function(e,a){var t=a.find(".wpas-fields");t.length&&t.wpas_reload_script()}),e(t).on("click",".widget-top",function(a){var t=e(this).parent().find(".wpas-fields");t.length&&t.wpas_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,a){a.item.find(".wpas-fields").wpas_reload_script_retry()})})},e.fn.wpas_nav_menu=function(){return this.each(function(){var a=e(this);a.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".wpas-fields").wpas_reload_script()}),a.on("sortstop",function(e,a){a.item.find(".wpas-fields").wpas_reload_script_retry()})})},e.fn.wpas_reload_script_retry=function(){return this.each(function(){var a=e(this);a.data("inited")&&a.children(".wpas-field-wp_editor").wpas_field_wp_editor()})},e.fn.wpas_reload_script=function(a){var n=e.extend({dependency:!0},a);return this.each(function(){var a=e(this);a.data("inited")||(a.children(".wpas-field-accordion").wpas_field_accordion(),a.children(".wpas-field-backup").wpas_field_backup(),a.children(".wpas-field-background").wpas_field_background(),a.children(".wpas-field-code_editor").wpas_field_code_editor(),a.children(".wpas-field-date").wpas_field_date(),a.children(".wpas-field-datetime").wpas_field_datetime(),a.children(".wpas-field-fieldset").wpas_field_fieldset(),a.children(".wpas-field-gallery").wpas_field_gallery(),a.children(".wpas-field-group").wpas_field_group(),a.children(".wpas-field-icon").wpas_field_icon(),a.children(".wpas-field-link").wpas_field_link(),a.children(".wpas-field-media").wpas_field_media(),a.children(".wpas-field-map").wpas_field_map(),a.children(".wpas-field-repeater").wpas_field_repeater(),a.children(".wpas-field-slider").wpas_field_slider(),a.children(".wpas-field-sortable").wpas_field_sortable(),a.children(".wpas-field-sorter").wpas_field_sorter(),a.children(".wpas-field-spinner").wpas_field_spinner(),a.children(".wpas-field-switcher").wpas_field_switcher(),a.children(".wpas-field-switcher_box").wpas_field_switcher_box(),a.children(".wpas-field-tabbed").wpas_field_tabbed(),a.children(".wpas-field-typography").wpas_field_typography(),a.children(".wpas-field-upload").wpas_field_upload(),a.children(".wpas-field-wp_editor").wpas_field_wp_editor(),a.children(".wpas-field-border").find(".wpas-color").wpas_color(),a.children(".wpas-field-background").find(".wpas-color").wpas_color(),a.children(".wpas-field-color").find(".wpas-color").wpas_color(),a.children(".wpas-field-color_group").find(".wpas-color").wpas_color(),a.children(".wpas-field-link_color").find(".wpas-color").wpas_color(),a.children(".wpas-field-typography").find(".wpas-color").wpas_color(),a.children(".wpas-field-select").find(".wpas-chosen").wpas_chosen(),a.children(".wpas-field-checkbox").find(".wpas-checkbox").wpas_checkbox(),a.children(".wpas-field-checkbox").find(".wpas-checkbox-all").wpas_checkbox_all(),a.children(".wpas-field-button_set").find(".wpas-siblings").wpas_siblings(),a.children(".wpas-field-image_select").find(".wpas-siblings").wpas_siblings(),a.children(".wpas-field-palette").find(".wpas-siblings").wpas_siblings(),a.children(".wpas-field").find(".wpas-help").wpas_help(),n.dependency&&a.wpas_dependency(),a.data("inited",!0),e(t).trigger("wpas-reload-script",a))})},e(t).ready(function(){e(".wpas-save").wpas_save(),e(".wpas-options").wpas_options(),e(".wpas-sticky-header").wpas_sticky(),e(".wpas-nav-options").wpas_nav_options(),e(".wpas-nav-metabox").wpas_nav_metabox(),e(".wpas-taxonomy").wpas_taxonomy(),e(".wpas-page-templates").wpas_page_templates(),e(".wpas-post-formats").wpas_post_formats(),e(".wpas-shortcode").wpas_shortcode(),e(".wpas-search").wpas_search(),e(".wpas-confirm").wpas_confirm(),e(".wpas-expand-all").wpas_expand_all(),e(".wpas-onload").wpas_reload_script(),e("#widgets-editor").wpas_widgets(),e("#widgets-right").wpas_widgets(),e("#menu-to-edit").wpas_nav_menu()})}(jQuery,window,document);